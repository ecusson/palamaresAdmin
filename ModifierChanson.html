<!doctype html>
	<head>
		<meta charset="utf-8">
		<title>Palmares///Librairie</title>
		<script	src="js/jquery-1.9.1.js"></script>
		<script	src="js/jquery.js"></script>
		<script	src="js/jquery-ui-1.10.3.custom.js"></script>
		<link href="css/jquery-ui-1.10.3.custom.css" rel="stylesheet">
		<link href="css/base.css" rel="stylesheet">
		<script>
		/*function chargement(){
			$.getJSON('http://lamatrice.cloudapp.net/palmaresAdil/v0/palmares/publications', function(data) {
				alert(data);
			});
		*/
		function chargement(){
			$.ajax({
			  dataType: "jsonp",
			  url: 'http://lamatrice.cloudapp.net/palmaresAdil/v0/palmares/publications' ,
			  }).done(function ( data ) {
			  	//Affichage console pour aper√ßu arboresence
				//console.log(data);
				//Trimming
				var Lespalmares = document.createElement('span');
						with(Lespalmares){
							id="accordion";
						}
				for(j=0;j<data.length;j++)
				{
					
					var unPalmares = document.createElement('h1');
						with(unPalmares){
							innerHTML=data[j].Palmares.Name;
							id='test';
						}
					var lesChansonsPalmares = document.createElement('div');
						with(lesChansonsPalmares){
							id="accordion"+(j+2);
						}
						
					for(i=0;i<data[j].Palmares.Positions.length;i++)
					{
						var uneChanson  = document.createElement('h1');
							with(uneChanson){
								innerHTML=data[j].Palmares.Positions[i].Media.Name;
							}
						var uneChansonPositionTab = document.createElement('div');
							with(uneChansonPositionTab){
								id="test";
							}
							var uneChansonPositionTabAssembleur = document.createElement('ul');
								with(uneChansonPositionTabAssembleur){
									id='icons';
									className="ui-widget ui-helper-clearfix"
								}
									var unePositionToucheMonter = document.createElement('li');
									with(unePositionToucheMonter){
										className='ui-state-default ui-corner-all';
										title="Monter(Position)"
									}
										var unePositionToucheMonterIcone = document.createElement('span');
										with(unePositionToucheMonterIcone){
											id='MonterIcone';
											className ='ui-icon ui-icon-triangle-1-n';
										}
										var unePositionToucheMonterDetail = document.createElement('span');
										with(unePositionToucheMonterDetail){
											innerHTML='Monter sa position';
										}
											unePositionToucheMonter.appendChild(unePositionToucheMonterIcone);
											unePositionToucheMonter.appendChild(unePositionToucheMonterDetail);
										uneChansonPositionTabAssembleur.appendChild(unePositionToucheMonter);
									uneChansonPositionTab.appendChild(uneChansonPositionTabAssembleur);
							lesChansonsPalmares.appendChild(uneChanson);
							lesChansonsPalmares.appendChild(uneChansonPositionTab);
					}
					Lespalmares.appendChild(unPalmares);
					Lespalmares.appendChild(lesChansonsPalmares);
				}
				document.body.insertBefore(Lespalmares, document.body.childNodes[0]);
				$("div[id^='accordion']").accordion();
				$("div[id^='accordion']").accordion({ autoHeight: false});
				$("span[id^='accordion']").accordion();
				$("span[id^='accordion']").accordion({ autoHeight: false});
			});
		}
		</script>
	</head>
	<body onload="chargement()">
					
					
	</body>
</html>
